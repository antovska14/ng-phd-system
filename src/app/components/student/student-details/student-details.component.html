<div *ngIf="student" class="h2 text-navy-blue">{{ student.firstName }} {{ student.lastName }}</div>
<div>
    <button (click)="showDetails = !showDetails" class="btn btn-primary bg-navy-blue border-navy-blue mb-3">
        {{ strings.phdStudentDetails }}
    </button>
    <button (click)="showFiles = !showFiles" class="btn btn-primary bg-navy-blue border-navy-blue mb-3 ml-3">
        {{ strings.files }}
    </button>
    <button (click)="showExams = !showExams" class="btn btn-primary bg-navy-blue border-navy-blue mb-3 ml-3">
        {{ strings.exams }}
    </button>
</div>
<div *ngIf="showDetails">
    <form *ngIf="student" #studentForm="ngForm" (ngSubmit)="onSubmit()">
        <div class="border border-navy-blue bg-light-grey rounded p-3">
            <div class="row form-group">
                <div class="col">
                    <text-input
                        [editMode]="editMode"
                        [(text)]="student.firstName"
                        [label]="strings.firstName"
                        [id]="'firstName'"
                        [name]="'firstName'"
                        [placeholder]="strings.enterFirstName"
                        [isRequired]="true"
                    ></text-input>
                </div>
                <div class="col">
                    <text-input
                        [editMode]="editMode"
                        [(text)]="student.middleName"
                        [label]="strings.middleName"
                        [id]="'middleName'"
                        [name]="'middleName'"
                        [placeholder]="strings.enterMiddleName"
                        [isRequired]="false"
                    ></text-input>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <text-input
                        [editMode]="editMode"
                        [(text)]="student.lastName"
                        [label]="strings.lastName"
                        [id]="'lastName'"
                        [name]="'lastName'"
                        [placeholder]="strings.enterLastName"
                        [isRequired]="true"
                    ></text-input>
                </div>
                <div class="col">
                    <text-input
                        [editMode]="editMode"
                        [(text)]="student.email"
                        [label]="strings.email"
                        [id]="'email'"
                        [name]="'email'"
                        [placeholder]="strings.enterEmail"
                        [type]="'email'"
                        [isRequired]="true"
                    ></text-input>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <text-input
                        [editMode]="editMode"
                        [(text)]="student.specialty"
                        [label]="strings.specialty"
                        [id]="'specialty'"
                        [name]="'specialty'"
                        [placeholder]="strings.enterSpecialty"
                        [isRequired]="true"
                    ></text-input>
                </div>
                <div class="col">
                    <date-picker
                        [(date)]="student.facultyCouncilChosenDate"
                        [label]="strings.facultyCouncilDate"
                        [editMode]="editMode"
                        [id]="'facultyCouncilChosenDate'"
                        [name]="'facultyCouncilChosenDate'"
                        [placeholder]="strings.enterFacultyCouncilDate"
                        [isRequired]="true"
                    ></date-picker>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.formOfEducation }}:</label>
                    <div *ngIf="!editMode">{{ student.formOfEducation.name }}</div>
                    <select
                        *ngIf="editMode"
                        [(ngModel)]="student.formOfEducation"
                        id="formOfEducation"
                        name="formOfEducation"
                        class="form-control custom-select"
                        required
                    >
                        <option *ngFor="let option of formsOfEducationOptions" [ngValue]="student.formOfEducation">{{
                            student.formOfEducation.name
                        }}</option>
                    </select>
                </div>
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.currentYear }}:</label>
                    <div *ngIf="!editMode">{{ student.currentYear }}</div>
                    <select
                        *ngIf="editMode"
                        [(ngModel)]="student.currentYear"
                        id="currentYear"
                        name="currentYear"
                        class="form-control custom-select"
                        required
                    >
                        <option
                            *ngFor="let option of formsOfEducationYearMap.get(student.formOfEducation.id)"
                            [ngValue]="student.currentYear"
                            >{{ student.currentYear }}</option
                        >
                    </select>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.professionalField }}:</label>
                    <div *ngIf="!editMode">{{ professionalField.name }}</div>
                    <select
                        *ngIf="editMode"
                        [(ngModel)]="professionalField"
                        id="professionalField"
                        name="professionalField"
                        class="form-control custom-select"
                        required
                    >
                        <option *ngFor="let option of professionalFieldOptions" [ngValue]="professionalField">{{
                            professionalField.name
                        }}</option>
                    </select>
                </div>
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.phdProgram }}:</label>
                    <div *ngIf="!editMode">{{ student.phdProgram.name }}</div>
                    <select
                        *ngIf="editMode"
                        [(ngModel)]="student.phdProgram"
                        id="phdProgram"
                        name="phdProgram"
                        class="form-control custom-select"
                        required
                    >
                        <option *ngFor="let option of phdProgramOptions" [ngValue]="student.phdProgram">{{
                            student.phdProgram.name
                        }}</option>
                    </select>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <date-picker
                        [(date)]="student.startDate"
                        [label]="strings.startDate"
                        [editMode]="editMode"
                        [id]="'startDate'"
                        [name]="'startDate'"
                        [placeholder]="strings.enterStartDate"
                        [isRequired]="true"
                    ></date-picker>
                </div>
                <div class="col">
                    <date-picker
                        [(date)]="student.endDate"
                        [label]="strings.endDate"
                        [editMode]="editMode"
                        [id]="'endDate'"
                        [name]="'endDate'"
                        [placeholder]="strings.enterEndDate"
                        [isRequired]="true"
                    ></date-picker>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.university }}:</label>
                    <div *ngIf="!editMode">{{ university.name }}</div>
                    <select
                        *ngIf="editMode"
                        [(ngModel)]="university"
                        id="university"
                        name="university"
                        class="form-control custom-select"
                        required
                    >
                        <option *ngFor="let option of universityOptions" [ngValue]="university">{{ university.name }}</option>
                    </select>
                </div>
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.faculty }}:</label>
                    <div *ngIf="!editMode">{{ faculty.name }}</div>
                    <select *ngIf="editMode" [(ngModel)]="faculty" id="faculty" name="faculty" class="form-control custom-select" required>
                        <option *ngFor="let option of facultyOptions" [ngValue]="faculty">{{ faculty.name }}</option>
                    </select>
                </div>
            </div>
            <div class="row form-group">
                <div class="col">
                    <label class="text-light-orange" for="id">{{ strings.department }}:</label>
                    <div *ngIf="!editMode">{{ student.department.name }}</div>
                    <select
                        *ngIf="editMode"
                        [(ngModel)]="student.department"
                        id="department"
                        name="department"
                        class="form-control custom-select"
                        required
                    >
                        <option *ngFor="let option of departmentOptions" [ngValue]="student.department">{{
                            student.department.name
                        }}</option>
                    </select>
                </div>
                <div class="col">
                    <text-input
                        [editMode]="editMode"
                        [(text)]="student.dissertationTheme"
                        [label]="strings.dissertationTheme"
                        [id]="'dissertationTheme'"
                        [name]="'dissertationTheme'"
                        [placeholder]="strings.enterDissertationTheme"
                        [isRequired]="true"
                    >
                    </text-input>
                </div>
            </div>
            <select-teachers [editMode]="editMode" [(selectedTeachers)]="student.teachers"> </select-teachers>
        </div>
        <div class="mt-3">
            <div class="d-flex justify-content-between" *ngIf="editMode">
                <button (click)="onCancelClick()" id="cancel-btn" class="btn btn-primary bg-navy-blue border-navy-blue">
                    {{ strings.cancel }}
                </button>
                <button
                    [disabled]="studentForm.invalid"
                    id="submit-btn"
                    class="btn btn-primary bg-navy-blue border-navy-blue"
                    type="submit"
                >
                    {{ strings.save }}
                </button>
            </div>
            <div class="d-flex justify-content-between" *ngIf="!editMode">
                <button (click)="onBackClick()" id="back-btn" class="btn btn-primary bg-navy-blue border-navy-blue">
                    {{ strings.back }}
                </button>
                <button (click)="onEditClick()" id="edit-btn" class="btn btn-primary bg-navy-blue border-navy-blue">
                    {{ strings.edit }}
                </button>
            </div>
        </div>
    </form>
</div>

<!-- <button [routerLink]="['/files', { studentId: student.id, currentYear: student.currentYear }]" id="edit-btn" class="btn btn-primary bg-navy-blue border-navy-blue">
    {{ strings.edit }}
</button> -->

<div *ngIf="showFiles" class="mt-3">
    <student-files [currentYear]="initialStudent.currentYear" [studentId]="initialStudent.id"></student-files>
</div>
